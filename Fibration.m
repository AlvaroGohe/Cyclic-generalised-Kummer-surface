K<r> := FunctionField(Rationals());
Qt<t> := FunctionField(K);
E := EllipticCurve([(-3*t^2*(1 - 2*r - 2*r^3 + 8*r^4 + 4*r^5 - 6*r^6 - 8*r^7 - r^8 + 4*r^9 + 6*r^10 + 4*r^11 + r^12 + 12*r^2*t - 24*r^3*t - 18*r^4*t + 18*r^5*t + 30*r^6*t + 12*r^7*t - 
    18*r^8*t - 36*r^9*t - 24*r^10*t - 6*r^11*t - 3*t^2 - 6*r*t^2 + 18*r^2*t^2 + 30*r^3*t^2 - 24*r^4*t^2 - 54*r^5*t^2 - 33*r^6*t^2 + 42*r^7*t^2 + 90*r^8*t^2 + 60*r^9*t^2 + 
    15*r^10*t^2 + 4*t^3 - 40*r^2*t^3 + 28*r^3*t^3 + 68*r^4*t^3 + 44*r^5*t^3 - 56*r^6*t^3 - 124*r^7*t^3 - 84*r^8*t^3 - 20*r^9*t^3 + 18*r*t^4 - 12*r^2*t^4 - 54*r^3*t^4 - 
    42*r^4*t^4 + 36*r^5*t^4 + 102*r^6*t^4 + 72*r^7*t^4 + 15*r^8*t^4 - 6*t^5 - 6*r*t^5 + 30*r^2*t^5 + 24*r^3*t^5 - 6*r^4*t^5 - 48*r^5*t^5 - 36*r^6*t^5 - 6*r^7*t^5 + 4*t^6 - 
    4*r*t^6 - 7*r^2*t^6 - 4*r^3*t^6 + 11*r^4*t^6 + 8*r^5*t^6 + r^6*t^6))/((-1 + r)^6*r^2*(1 + r)^4), 
 (t^3*(2 - 2*r - r^2 + r^4 + 2*r^5 + r^6 + 3*r^2*t - 3*r^3*t - 6*r^4*t - 3*r^5*t - 3*t^2 + 3*r^2*t^2 + 6*r^3*t^2 + 3*r^4*t^2 + t^3 + r*t^3 - 4*r^2*t^3 - r^3*t^3)*
   (-1 + 2*r - 10*r^3 + 19*r^4 + 8*r^5 - 12*r^6 - 16*r^7 - 2*r^8 + 8*r^9 + 12*r^10 + 8*r^11 + 2*r^12 + 24*r^2*t - 48*r^3*t - 36*r^4*t + 36*r^5*t + 60*r^6*t + 24*r^7*t - 
    36*r^8*t - 72*r^9*t - 48*r^10*t - 12*r^11*t + 3*t^2 - 30*r*t^2 + 36*r^2*t^2 + 78*r^3*t^2 - 57*r^4*t^2 - 108*r^5*t^2 - 66*r^6*t^2 + 84*r^7*t^2 + 180*r^8*t^2 + 
    120*r^9*t^2 + 30*r^10*t^2 + 8*t^3 - 80*r^2*t^3 + 56*r^3*t^3 + 136*r^4*t^3 + 88*r^5*t^3 - 112*r^6*t^3 - 248*r^7*t^3 - 168*r^8*t^3 - 40*r^9*t^3 - 9*t^4 + 54*r*t^4 - 
    24*r^2*t^4 - 126*r^3*t^4 - 75*r^4*t^4 + 72*r^5*t^4 + 204*r^6*t^4 + 144*r^7*t^4 + 30*r^8*t^4 - 12*t^5 - 12*r*t^5 + 60*r^2*t^5 + 48*r^3*t^5 - 12*r^4*t^5 - 96*r^5*t^5 - 
    72*r^6*t^5 - 12*r^7*t^5 + 11*t^6 - 14*r*t^6 - 14*r^2*t^6 - 2*r^3*t^6 + 19*r^4*t^6 + 16*r^5*t^6 + 2*r^6*t^6))/((-1 + r)^9*r^3*(1 + r)^6)]);

A2 := Lattice("A",2);
H := LatticeWithGram(Matrix([[0,1],[1,0]]): CheckPositive := false);

Rl := DirectSum(DirectSum(DirectSum(Lattice("A",5),Lattice("A",5)),Lattice("A",2)),Lattice("D",4));
L := DirectSum(H,(-1)*Rl:  CheckPositive := false);

Determinant(Rl);
Determinant(L);
REl:=DirectSum(DirectSum(Lattice("A",2),Lattice("D",7)),Lattice("E",8));
